# Agentic Primitives Configuration
# This file defines global settings for the agentic-primitives repository

version: "1.0"

# System-level specification version
spec_version: "v1"

# Repository metadata
repository:
  name: "agentic-primitives"
  version: "0.1.0"
  description: "Atomic building blocks for AI coding systems"

# Directory paths (relative to repository root)
paths:
  specs: "specs/v1"              # Schema specifications for v1
  primitives: "primitives/v1"    # v1 primitives (prompts, tools, hooks)
  experimental: "primitives/experimental"  # Sandbox for v2+ testing
  providers: "providers"         # Provider adapters (unchanged)
  cli: "cli"
  docs: "docs"

# Validation settings
validation:
  # Enable/disable validation layers
  structural: true
  schema: true
  semantic: true

  # Fail on warnings (false = warnings allowed)
  strict: true

  # Hash algorithm for versioning (blake3, sha256)
  hash_algorithm: "blake3"

  # Verify hashes on validation
  verify_hashes: true

# Versioning settings
versioning:
  # Primitives that require versioning (Tier 1)
  required_for:
    - "agents"
    - "commands"
    - "meta-prompts"

  # Primitives with optional versioning (Tier 2)
  optional_for:
    - "skills"
    - "tools"
    - "hooks"

  # Default version status for new versions
  default_status: "draft"

  # Allowed version statuses
  allowed_statuses:
    - "draft"
    - "active"
    - "deprecated"
    - "archived"

# Naming conventions
naming:
  # Case style for IDs (kebab-case, snake_case, camelCase)
  id_case: "kebab-case"

  # Allowed characters in IDs (regex)
  id_pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"

  # Maximum ID length
  max_id_length: 64

  # Category naming (freeform but lowercase recommended)
  category_pattern: "^[a-z0-9]+(-[a-z0-9]+)*$"

# Provider settings
providers:
  # Default provider for build operations
  default: "claude"

  # Enabled providers
  enabled:
    - "claude"
    - "openai"
    - "cursor"

  # Provider-specific settings
  claude:
    # Claude Agent SDK directory name
    output_dir: ".claude"

    # Default model
    default_model: "claude/sonnet"

    # Hook execution timeout (seconds)
    hook_timeout: 60

  openai:
    output_dir: ".openai"
    default_model: "openai/gpt-codex"

  cursor:
    output_dir: ".cursor"
    default_model: "cursor/gpt-4"

# Hook settings
hooks:
  # Default execution strategy
  default_execution: "pipeline"

  # Allowed execution strategies
  allowed_execution:
    - "pipeline" # Sequential with fail-fast
    - "parallel" # All middleware runs in parallel

  # Default decision when no middleware blocks
  default_decision: "allow"

  # Hook timeout (seconds)
  timeout: 60

  # Middleware types
  middleware_types:
    - "safety" # Blocking operations
    - "observability" # Non-blocking metrics/logs

# Tool settings
tools:
  # Default safety settings for tools
  default_safety:
    max_runtime_sec: 600
    working_dir: "."
    allow_write: false

# CLI settings
cli:
  # Output formatting
  output_format: "table" # table, json, yaml

  # Color output
  use_color: true

  # Verbose output
  verbose: false

  # Show progress indicators
  show_progress: true

# Testing settings
testing:
  # Test fixtures directory
  fixtures_dir: "cli/tests/fixtures"

  # Run integration tests
  run_integration: true

  # Coverage thresholds
  coverage:
    rust_threshold: 80
    python_threshold: 80

# Build settings
build:
  # Default output directory
  output_dir: "build"

  # Clean build directory before building
  clean_before_build: true

  # Generate provider-specific files
  generate_files: true

# Installation settings
install:
  # Default installation target
  default_target: "project" # project, global

  # Global installation paths (expandable with ~)
  global_paths:
    claude: "~/.claude"
    openai: "~/.openai"
    cursor: "~/.cursor"

  # Project installation paths (relative to project root)
  project_paths:
    claude: ".claude"
    openai: ".openai"
    cursor: ".cursor"

  # Merge strategy for existing files
  merge_strategy: "preserve" # preserve, overwrite, prompt

# Logging settings
logging:
  # Log level (debug, info, warn, error)
  level: "info"

  # Log file path (empty = no file logging)
  file: ""

  # Log format
  format: "text" # text, json

# Development settings
development:
  # Enable debug mode
  debug: false

  # Watch for file changes
  watch: false

  # Auto-reload on changes
  auto_reload: false
