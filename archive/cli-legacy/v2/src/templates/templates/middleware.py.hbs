#!/usr/bin/env python3
"""
{{description}}

Hook Event: {{event}}
Type: {{middleware_type}}
"""

import json
import sys
from typing import Any, Dict


def process_hook(input_data: Dict[str, Any]) -> Dict[str, Any]:
    """
    Process hook input and return decision.
    
    Args:
        input_data: Hook input with session_id, hook_event_name, etc.
        
    Returns:
        Dict with decision and optional context/reason
    """
    session_id = input_data.get("session_id")
    hook_event = input_data.get("hook_event_name")
    
    # TODO: Implement your hook logic here
    
    # Example decision structure:
    return {
        "decision": "allow",  # or "deny", "block", "ask"
        "reason": "Hook processed successfully",
        "hookSpecificOutput": {
            "hookEventName": hook_event,
            "additionalContext": "Optional context for Claude"
        }
    }


def main():
    try:
        # Read JSON input from stdin
        input_data = json.load(sys.stdin)
        
        # Process the hook
        output = process_hook(input_data)
        
        # Write JSON output to stdout
        print(json.dumps(output))
        sys.exit(0)
        
    except json.JSONDecodeError as e:
        print(f"Error: Invalid JSON input: {e}", file=sys.stderr)
        sys.exit(1)
    except Exception as e:
        print(f"Error: {e}", file=sys.stderr)
        sys.exit(1)


if __name__ == "__main__":
    main()

