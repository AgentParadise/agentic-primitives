---
title: agentic-p validate
description: Validate primitives structure and content
---

import { Accordions, Accordion } from 'fumadocs-ui/components/accordion';
import { Step, Steps } from 'fumadocs-ui/components/steps';

## Overview

The `validate` command runs comprehensive validation across all primitives, checking structure, schema compliance, and semantic correctness.

## Usage

```bash
agentic-p validate [OPTIONS] [PATH]
```

## Arguments

| Argument | Description | Required |
|----------|-------------|----------|
| `[PATH]` | Path to validate | No (defaults to `./primitives`) |

## Options

| Option | Description | Default |
|--------|-------------|---------|
| `--check-hashes` | Verify BLAKE3 hashes for all versions | `false` |
| `--strict` | Fail on warnings | `false` |
| `-t, --type <TYPE>` | Only validate specific type | All types |
| `--fix` | Auto-fix simple issues (formatting) | `false` |
| `-v, --verbose` | Show detailed output | `false` |
| `-q, --quiet` | Only show errors | `false` |

## Examples

### Basic Usage

```bash
# Validate all primitives
agentic-p validate

# Validate specific directory
agentic-p validate ./primitives/v1/agents

# Validate with hash checking
agentic-p validate --check-hashes
```

### Filtering

```bash
# Only validate hooks
agentic-p validate --type hook

# Only validate agents
agentic-p validate --type agent

# Strict mode (warnings become errors)
agentic-p validate --strict
```

### Auto-fix

```bash
# Fix formatting issues
agentic-p validate --fix
```

## Validation Layers

agentic-p performs **three-layer validation**:

<Steps>
  <Step>
    ### Structural Validation
    Checks file organization and naming:
    - Correct directory structure
    - Required files present
    - Kebab-case naming
    - File extensions
  </Step>
  <Step>
    ### Schema Validation
    Validates YAML/JSON against schemas:
    - `spec_version` field
    - Required fields present
    - Field types correct
    - Valid enums
  </Step>
  <Step>
    ### Semantic Validation
    Checks logical correctness:
    - Version integrity
    - Hash verification
    - Cross-references valid
    - Model references exist
  </Step>
</Steps>

## Output Format

### Success

```
✓ Validating primitives/v1/agents/python/python-pro
✓ Validating primitives/v1/commands/qa/review
✓ Validating primitives/v1/hooks/security/bash-validator

════════════════════════════════════════
✓ Validation passed: 12 primitives, 0 errors, 0 warnings
════════════════════════════════════════
```

### Errors

```
✗ primitives/v1/agents/python/python-pro
  ERROR: Missing required field: model.provider
  ERROR: Version 1 hash mismatch
    Expected: blake3:9f86d081...
    Actual:   blake3:a7ffc6f8...

✓ primitives/v1/commands/qa/review

════════════════════════════════════════
✗ Validation failed: 2 errors, 0 warnings
════════════════════════════════════════
```

### Warnings

```
✓ primitives/v1/agents/python/python-pro
  WARNING: No description provided
  WARNING: Version 1 has pending hash

════════════════════════════════════════
✓ Validation passed: 12 primitives, 0 errors, 2 warnings
════════════════════════════════════════
```

## Common Validation Errors

<Accordions>
  <Accordion title="Missing required field">
    **Error:** `Missing required field: model.provider`

    **Fix:** Add the missing field to your meta file:
    ```yaml
    model:
      provider: anthropic
      name: claude-4-sonnet
    ```
  </Accordion>

  <Accordion title="Hash mismatch">
    **Error:** `Version 1 hash mismatch`

    **Cause:** The file content was modified after the hash was computed.

    **Fix:** Either revert the changes or create a new version:
    ```bash
    agentic-p version bump python/python-pro --notes "Updated content"
    ```
  </Accordion>

  <Accordion title="Invalid naming">
    **Error:** `Name must be kebab-case: PythonPro`

    **Fix:** Rename to use lowercase with hyphens:
    ```bash
    mv PythonPro python-pro
    ```
  </Accordion>

  <Accordion title="Missing prompt file">
    **Error:** `Missing prompt file for version 1`

    **Fix:** Create the versioned prompt file:
    ```bash
    touch primitives/v1/agents/python/python-pro/python-pro.v1.md
    ```
  </Accordion>

  <Accordion title="Invalid model reference">
    **Error:** `Unknown model: anthropic/claude-5`

    **Fix:** Use a valid model from `providers/models/`:
    ```yaml
    model:
      provider: anthropic
      name: claude-4-sonnet
    ```
  </Accordion>
</Accordions>

## Exit Codes

| Code | Meaning |
|------|---------|
| `0` | Validation passed |
| `2` | Validation errors found |
| `3` | Configuration error |

## CI Integration

```yaml
# .github/workflows/validate.yml
name: Validate Primitives

on: [push, pull_request]

jobs:
  validate:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install agentic-p
        run: just build && just install
      - name: Validate
        run: agentic-p validate --strict --check-hashes
```

## Related Commands

- [`agentic-p inspect`](/docs/cli/inspect) - Detailed primitive info
- [`agentic-p version`](/docs/cli/version) - Manage versions
- [`agentic-p build`](/docs/cli/build) - Build after validation
