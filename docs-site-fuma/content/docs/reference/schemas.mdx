---
title: JSON Schemas
description: Complete reference for all primitive schemas
---

## Overview

agentic-p uses JSON schemas to validate primitive metadata files. All schemas are located in `specs/v1/` and follow JSON Schema Draft 2020-12.

## Available Schemas

| Schema | File | Validates |
|--------|------|-----------|
| Prompt Meta | `prompt-meta.schema.json` | Agent, command, skill metadata |
| Tool Meta | `tool-meta.schema.json` | Tool specifications |
| Hook Meta | `hook-meta.schema.json` | Hook configurations |
| Model Config | `model-config.schema.json` | Model provider configs |
| Provider Impl | `provider-impl.schema.json` | Provider implementations |

---

## Prompt Meta Schema

Used for agents, commands, and skills.

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `spec_version` | string | Schema version (e.g., "v1") |
| `type` | enum | `agent`, `command`, `skill` |
| `name` | string | Primitive name (kebab-case) |
| `versions` | array | Version registry |
| `default_version` | integer | Default version number |

### Full Schema

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agentic-p.dev/schemas/v1/prompt-meta.schema.json",
  "title": "Prompt Metadata",
  "description": "Schema for agent, command, and skill metadata",
  "type": "object",
  "required": ["spec_version", "type", "name", "versions", "default_version"],
  "properties": {
    "spec_version": {
      "type": "string",
      "pattern": "^v[0-9]+$",
      "description": "Schema version"
    },
    "type": {
      "type": "string",
      "enum": ["agent", "command", "skill", "meta-prompt"],
      "description": "Primitive type"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9-]*$",
      "description": "Primitive name in kebab-case"
    },
    "description": {
      "type": "string",
      "maxLength": 500,
      "description": "Brief description"
    },
    "versions": {
      "type": "array",
      "minItems": 1,
      "items": {
        "$ref": "#/$defs/version"
      }
    },
    "default_version": {
      "type": "integer",
      "minimum": 1,
      "description": "Default version number"
    },
    "model": {
      "$ref": "#/$defs/model_ref",
      "description": "Preferred model"
    },
    "tools": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Tool dependencies"
    },
    "categories": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Categories for discovery"
    }
  },
  "$defs": {
    "version": {
      "type": "object",
      "required": ["version", "status", "created"],
      "properties": {
        "version": {
          "type": "integer",
          "minimum": 1
        },
        "status": {
          "type": "string",
          "enum": ["draft", "active", "deprecated", "archived"]
        },
        "hash": {
          "type": "string",
          "pattern": "^blake3:[a-f0-9]{64}$|^blake3:pending$"
        },
        "created": {
          "type": "string",
          "format": "date"
        },
        "notes": {
          "type": "string"
        }
      }
    },
    "model_ref": {
      "type": "object",
      "required": ["provider", "name"],
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["anthropic", "openai", "google"]
        },
        "name": {
          "type": "string"
        }
      }
    }
  }
}
```

### Example

```yaml
spec_version: "v1"
type: agent
name: python-pro
description: "Expert Python developer"

versions:
  - version: 1
    status: deprecated
    hash: blake3:9f86d081884c7d659a2feaa0c55ad015a3bf4f1b2b0b822cd15d6c15b0f00a08
    created: "2025-11-13"
    notes: "Initial version"
  - version: 2
    status: active
    hash: blake3:a7ffc6f8bf1ed76651c14756a061d662f580ff4de43b49fa82d80a4b80f8434a
    created: "2025-12-09"
    notes: "Added async expertise"

default_version: 2

model:
  provider: anthropic
  name: claude-4-sonnet

categories:
  - python
  - development
```

---

## Tool Meta Schema

Used for tool specifications.

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `spec_version` | string | Schema version |
| `type` | literal | Must be "tool" |
| `name` | string | Tool name |
| `input_schema` | object | JSON Schema for inputs |

### Full Schema

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agentic-p.dev/schemas/v1/tool-meta.schema.json",
  "title": "Tool Metadata",
  "type": "object",
  "required": ["spec_version", "type", "name", "input_schema"],
  "properties": {
    "spec_version": {
      "type": "string",
      "pattern": "^v[0-9]+$"
    },
    "type": {
      "const": "tool"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9-]*$"
    },
    "description": {
      "type": "string"
    },
    "input_schema": {
      "type": "object",
      "description": "JSON Schema for tool inputs"
    },
    "output_schema": {
      "type": "object",
      "description": "JSON Schema for tool outputs"
    },
    "implementations": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/implementation"
      }
    }
  },
  "$defs": {
    "implementation": {
      "type": "object",
      "required": ["provider"],
      "properties": {
        "provider": {
          "type": "string",
          "enum": ["local", "claude", "openai"]
        },
        "runtime": {
          "type": "string",
          "enum": ["python", "typescript", "rust"]
        },
        "entrypoint": {
          "type": "string"
        }
      }
    }
  }
}
```

### Example

```yaml
spec_version: "v1"
type: tool
name: run-tests
description: "Execute test suite"

input_schema:
  type: object
  properties:
    path:
      type: string
      description: "Test path"
    verbose:
      type: boolean
      default: false
  required:
    - path

output_schema:
  type: object
  properties:
    success:
      type: boolean
    passed:
      type: integer
    failed:
      type: integer

implementations:
  - provider: local
    runtime: python
    entrypoint: impl.local.py
```

---

## Hook Meta Schema

Used for hook configurations.

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `spec_version` | string | Schema version |
| `type` | literal | Must be "hook" |
| `name` | string | Hook name |
| `events` | array | Events to handle |

### Full Schema

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agentic-p.dev/schemas/v1/hook-meta.schema.json",
  "title": "Hook Metadata",
  "type": "object",
  "required": ["spec_version", "type", "name", "events"],
  "properties": {
    "spec_version": {
      "type": "string",
      "pattern": "^v[0-9]+$"
    },
    "type": {
      "const": "hook"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9-]*$"
    },
    "description": {
      "type": "string"
    },
    "events": {
      "type": "array",
      "items": {
        "type": "string",
        "enum": [
          "PreToolUse",
          "PostToolUse",
          "UserPromptSubmit",
          "SessionStart",
          "SessionEnd",
          "Notification",
          "PreCompact",
          "Stop",
          "SubagentStop"
        ]
      }
    },
    "action": {
      "type": "string",
      "enum": ["block", "warn", "log", "modify"],
      "default": "log"
    },
    "matcher": {
      "$ref": "#/$defs/matcher"
    },
    "implementation": {
      "$ref": "#/$defs/implementation"
    },
    "config": {
      "type": "object",
      "description": "Hook-specific configuration"
    }
  },
  "$defs": {
    "matcher": {
      "type": "object",
      "properties": {
        "tool_names": {
          "type": "array",
          "items": { "type": "string" }
        },
        "patterns": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "implementation": {
      "type": "object",
      "required": ["runtime", "entrypoint"],
      "properties": {
        "runtime": {
          "type": "string",
          "enum": ["python", "typescript"]
        },
        "entrypoint": {
          "type": "string"
        },
        "dependencies": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    }
  }
}
```

### Example

```yaml
spec_version: "v1"
type: hook
name: bash-validator
description: "Validates bash commands"

events:
  - PreToolUse

action: block

matcher:
  tool_names:
    - Bash
    - Shell

implementation:
  runtime: python
  entrypoint: middleware.py
  dependencies:
    - pyyaml>=6.0

config:
  blocked_patterns:
    - "rm -rf /"
  allowed_patterns:
    - "rm -rf node_modules"
```

---

## Validation

Schemas are validated automatically during `agentic-p validate`:

```bash
# Validate all primitives against schemas
agentic-p validate

# Show schema errors in detail
agentic-p validate --verbose
```

## Custom Schemas

You can extend schemas for custom primitive types:

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://your-domain.com/schemas/custom-primitive.schema.json",
  "allOf": [
    { "$ref": "https://agentic-p.dev/schemas/v1/prompt-meta.schema.json" },
    {
      "properties": {
        "custom_field": {
          "type": "string"
        }
      }
    }
  ]
}
```
