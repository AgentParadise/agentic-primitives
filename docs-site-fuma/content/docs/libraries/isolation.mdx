---
title: agentic-isolation
description: Workspace isolation for AI agent execution with security hardening and streaming
---

# agentic-isolation

Production-grade workspace isolation for AI agent execution.

## Features

- **Docker isolation** - Run agents in secure, ephemeral containers
- **Security hardening** - Drop capabilities, read-only root, gVisor support
- **Real-time streaming** - Stream stdout for live observability
- **Simple API** - Async context manager with sensible defaults

## Installation

```bash
pip install agentic-isolation
```

## Quick Start

```python
from agentic_isolation import AgenticWorkspace

async with AgenticWorkspace.create(provider="docker") as workspace:
    result = await workspace.execute("echo hello")
    print(result.stdout)  # "hello\n"
```

## Providers

### WorkspaceDockerProvider

Production-grade isolation with Docker containers.

```python
from agentic_isolation import AgenticWorkspace, SecurityConfig

async with AgenticWorkspace.create(
    provider="docker",
    image="python:3.12-slim",
    security=SecurityConfig.production(),
) as workspace:
    result = await workspace.execute("python --version")
```

### WorkspaceLocalProvider

For development and testing without Docker.

```python
async with AgenticWorkspace.create(
    provider="local",
    working_dir="/workspace",
) as workspace:
    result = await workspace.execute("echo hello")
```

## Security Hardening

The `SecurityConfig` class provides Docker security options:

```python
from agentic_isolation import SecurityConfig

# Production (recommended)
security = SecurityConfig.production()

# Development (less restrictive)
security = SecurityConfig.development()
```

### Production Security Features

| Feature | Description |
|---------|-------------|
| `cap_drop_all` | Drop ALL Linux capabilities |
| `no_new_privileges` | Prevent privilege escalation |
| `read_only_root` | Read-only root filesystem |
| `tmpfs_tmp` | Ephemeral /tmp mount |
| `tmpfs_home` | Ephemeral /home/agent mount |
| `pids_limit` | Max 256 processes |
| `use_gvisor` | gVisor runtime (if available) |

## Real-Time Streaming

Stream stdout line-by-line for observability:

```python
async with AgenticWorkspace.create(provider="docker") as workspace:
    async for line in workspace.stream(["python", "-u", "agent.py"]):
        print(f"Agent: {line}")
        # Parse JSONL events, update dashboard, etc.
```

## File Operations

```python
async with AgenticWorkspace.create() as workspace:
    # Write file
    await workspace.write_file("script.py", b"print('hello')")

    # Read file
    content = await workspace.read_file("script.py")

    # Check existence
    exists = await workspace.file_exists("script.py")

    # Execute
    result = await workspace.execute("python script.py")
```

## API Reference

### AgenticWorkspace.create()

```python
@classmethod
async def create(
    provider: str = "docker",
    image: str | None = None,
    working_dir: str = "/workspace",
    environment: dict[str, str] | None = None,
    security: SecurityConfig | None = None,
) -> AgenticWorkspace
```

### SecurityConfig

```python
@dataclass
class SecurityConfig:
    cap_drop_all: bool = True
    no_new_privileges: bool = True
    read_only_root: bool = True
    tmpfs_tmp: bool = True
    tmpfs_home: bool = True
    pids_limit: int | None = 256
    use_gvisor: bool = False

    @classmethod
    def production(cls) -> SecurityConfig: ...

    @classmethod
    def development(cls) -> SecurityConfig: ...
```

### ExecuteResult

```python
@dataclass
class ExecuteResult:
    exit_code: int
    stdout: str
    stderr: str
    success: bool
    duration_ms: float
    timed_out: bool = False
```

## See Also

- [ADR-027: Provider Workspace Images](/docs/reference/adrs)
- [Security Best Practices](/docs/concepts/providers)
